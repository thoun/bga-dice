$sqrt3: 1.732;
$tilt: 35.27deg; // atan(1/sqrt(2))

.bga-dice_die8 {
  --half-size: calc(var(--size) / 2);
  transform: translateZ(var(--half-size));

  .bga-dice_die-faces {
    // Top Faces (1-4) need negative tilt on X
    &[data-visible-face="1"] { // Top-Front
      transform: rotateY(0deg) rotateX(-$tilt);
    }
    &[data-visible-face="2"] { // Top-Right (Rotate 1st face -90deg around Y)
      transform: rotateY(270deg) rotateX(-$tilt);
    }
    &[data-visible-face="3"] { // Top-Back (Rotate 1st face -180deg around Y)
      transform: rotateY(180deg) rotateX(-$tilt);
    }
    &[data-visible-face="4"] { // Top-Left (Rotate 1st face -270deg around Y)
      transform: rotateY(90deg) rotateX(-$tilt);
    }

    // Bottom Faces (5-8) need flip (180deg) + negative tilt on X
    &[data-visible-face="5"] { // Bottom-Front
      transform: rotateY(0deg) rotateX(180deg - $tilt);
    }
    &[data-visible-face="6"] { // Bottom-Right (Rotate 5th face -90deg around Y)
      transform: rotateY(270deg) rotateX(180deg - $tilt);
    }
    &[data-visible-face="7"] { // Bottom-Back (Rotate 5th face -180deg around Y)
      transform: rotateY(180deg) rotateX(180deg - $tilt);
    }
    &[data-visible-face="8"] { // Bottom-Left (Rotate 5th face -270deg around Y)
      transform: rotateY(90deg) rotateX(180deg - $tilt);
    }

    .bga-dice_die-face {
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);

      position: absolute;
      left: 0;
      bottom: 50%;
      height: calc(var(--half-size) * $sqrt3);
      width: var(--size);
      transform-origin: 50% 100%;

      @for $i from 1 through 8 {
        $faceTilt: $tilt;
        @if $i > 4 {
          $faceTilt: 180deg - $tilt;
        }
        
        $yRotation: ($i - 1) * 90deg;

        &[data-face="#{$i}"] {
          transform: rotateY($yRotation) translateZ(var(--half-size)) rotateX($faceTilt);
        }
      }
    }
  } 
}